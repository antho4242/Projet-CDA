<%- include("../../partials/header", { title }) %>
<%- include("../../partials/nav") %>

<main class="container main">
  <div class="page-header">
    <h1>üì¶ Gestion des produits</h1>
    <div style="display:flex; gap:10px">
      <a href="/dashboard/produits/ajouter" class="btn btn--primary">‚ûï Ajouter</a>
      <a href="/dashboard" class="btn btn--ghost">‚Üê Dashboard</a>
    </div>
  </div>

  <div class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th>R√©f√©rence</th>
          <th>Nom</th>
          <th>Prix</th>
          <th>Taille</th>
          <th>Cat√©gorie</th>
          <th>Stock</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% produits.forEach(p => { %>
          <tr>
            <td><code><%= p.Reference %></code></td>
            <td><%= p.Nom_produit %></td>
            <td><%= parseFloat(p.Prix).toFixed(2) %> ‚Ç¨</td>
            <td><%= p.Taille_produit %></td>
            <td><%= p.categorie %></td>
            <td class="<%= p.stock <= 5 ? 'text-danger' : '' %>">
              <%= p.stock ?? 'N/A' %>
            </td>
            <td style="display:flex; gap:8px">
              <a href="/dashboard/produits/modifier/<%= p.ID_produit %>"
                 class="btn btn--ghost btn--sm">‚úèÔ∏è Modifier</a>
              <form action="/dashboard/produits/supprimer/<%= p.ID_produit %>"
                    method="POST"
                    onsubmit="return confirm('Supprimer ce produit ?')">
                <button class="btn btn--danger btn--sm">üóë Supprimer</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</main>

<%- include("../../partials/footer") %>